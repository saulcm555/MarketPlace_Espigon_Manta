# ============================================
# MarketPlace Espig√≥n Manta - Variables de Entorno
# Configuraci√≥n para Docker Compose
# ============================================

# ==========================================
# General
# ==========================================
NODE_ENV=development

# ==========================================
# Database (Supabase PostgreSQL)
# ==========================================
DB_HOST=db.yourproject.supabase.co
# Puerto directo (para transacciones individuales)
DB_PORT_DIRECT=5432
# Puerto pooler (para alta concurrencia - recomendado)
DB_PORT_POOLER=6543
DB_USERNAME=postgres
DB_PASSWORD=CHANGEME_DB_PASSWORD
DB_DATABASE=postgres
DB_SCHEMA=public
DB_SCHEMA_AUTH=auth_service
DB_SCHEMA_PAYMENT=public

# ==========================================
# Supabase
# ==========================================
SUPABASE_URL=https://yourproject.supabase.co
SUPABASE_KEY=CHANGEME_SUPABASE_SERVICE_ROLE_KEY
SUPABASE_ANON_KEY=your-anon-key-here
SUPABASE_BUCKET=marketplace-images

# ==========================================
# JWT Configuration (compartido entre servicios)
# ==========================================
JWT_SECRET=CHANGEME_JWT_SECRET_MINIMUM_32_CHARS
JWT_ACCESS_EXPIRES_IN=15m
JWT_REFRESH_EXPIRES_IN=7d
JWT_EXPIRES_IN=24h

# ==========================================
# Redis (opcional - usa el contenedor interno)
# ==========================================
REDIS_PASSWORD=

# ==========================================
# Payment Service
# ==========================================
PAYMENT_PROVIDER=mock
STRIPE_SECRET_KEY=sk_test_your_key_here
STRIPE_WEBHOOK_SECRET=whsec_your_secret_here
WEBHOOK_TIMEOUT=10000
WEBHOOK_RETRY_ATTEMPTS=3
INTERNAL_API_KEY=CHANGEME_INTERNAL_API_KEY

# ==========================================
# Admin Seed - Usuario Administrador Inicial
# ==========================================
ADMIN_NAME=Admin
ADMIN_EMAIL=admin@espigon.com
ADMIN_PASSWORD=CHANGEME_ADMIN_PASSWORD
ADMIN_PHONE=0000000000

# ==========================================
# Demo Client Token
# ==========================================
DEMO_CLIENT_TOKEN=your-demo-client-token-here

# ==========================================
# AI - Google Gemini API
# ==========================================
GEMINI_API_KEY=CHANGEME_GEMINI_API_KEY
GEMINI_MODEL=gemini-2.0-flash

# ==========================================
# CORS Configuration
# ==========================================
# URL del frontend (para desarrollo local)
CORS_ORIGIN=http://localhost:5173

# ==========================================
# URLs de Microservicios
# ==========================================
REST_SERVICE_URL=http://localhost:3000
PAYMENT_SERVICE_URL=http://localhost:3001
REPORT_SERVICE_URL=http://localhost:4000
MCP_SERVICE_URL=http://localhost:3003
REALTIME_SERVICE_URL=http://localhost:8085

# ==========================================
# NOTAS DE CONFIGURACI√ìN Y SEGURIDAD
# ==========================================
#
# üîí SEGURIDAD CR√çTICA:
# - NUNCA subas el archivo .env al repositorio Git
# - Aseg√∫rate de que .env est√° en .gitignore
# - Cambia TODOS los valores marcados con CHANGEME
# - Usa contrase√±as seguras (m√≠nimo 16 caracteres aleatorios)
#
# üìã PASOS PARA CONFIGURAR:
#
# 1. Copia este archivo como .env:
#    cp .env.example .env
#
# 2. Configura Supabase:
#    - Obt√©n DB_HOST, DB_USERNAME, DB_PASSWORD de tu proyecto
#    - Copia SUPABASE_URL y SUPABASE_ANON_KEY del dashboard
#    - Usa DB_PORT_POOLER (6543) para mejor rendimiento
#
# 3. Genera secrets seguros en PowerShell:
#    -Random -Count 32 | ForEach-Object { $_.ToString("X2") }
#    
#    O en Linux/Mac:
#    openssl rand -hex 32
#
# 4. Configura JWT_SECRET (m√≠nimo 32 caracteres)
# 5. Configura INTERNAL_API_KEY para comunicaci√≥n entre servicios
# 6. Configura ADMIN_PASSWORD para el usuario administrador inicial
# 7. Obt√©n GEMINI_API_KEY de: https://makersuite.google.com/app/apikey
#
# 8. Si usas Stripe real (no mock):
#    - Obt√©n STRIPE_SECRET_KEY del dashboard de Stripe
#    - Configura STRIPE_WEBHOOK_SECRET
#
# üì¶ PUERTOS DE POSTGRESQL:
# - DB_PORT_DIRECT (5432): Conexi√≥n directa, mejor para transacciones individuales
# - DB_PORT_POOLER (6543): Conexi√≥n pooler, mejor para alta concurrencia
# 
# La mayor√≠a de servicios usan pooler por defecto para mejor rendimiento
#
# ==========================================

#    - OPENAI_API_KEY
#    - ANTHROPIC_API_KEY
#
# ==========================================
